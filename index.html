<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>wschat</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">

        var websocket = new WebSocket("ws://pepsi.luckofwise.com:8001");

        //WebSocketのイベントの登録
        websocket.live("message", receiveMessage);

        //送信ボタンのクリックイベントの登録
        $("#button").live("click", sendMessage);

        //message送信
        function sendMessage() {
            websocket.send($("#text").val());
            $("#text").val("");
        }

        //message受信
        function receiveMessage(msg) {
            $("#receive").prepend("<br />");
            $("#receive").prepend(msg.data);
        }
    </script>
</head>
<body>
<h3>Websocket Chat</h3>
<input type="text" id="text">
<input type="button" id="button" value="送信">

<div id="receive">
</div>
</body>
</html>